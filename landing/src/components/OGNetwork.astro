---
/**
 * OGNetwork - SVG Memory Network for OG Image
 *
 * A static, curated visualization of the "Memory Constellation" concept
 * Designed for 1200x630px OG image export
 */

interface Node {
  x: number;
  y: number;
  r: number;
}

// Curated node positions for visual balance
// Positioned to create organic clustering with breathing room for text
const nodes: Node[] = [
  // Left cluster (sparse, atmospheric)
  { x: 80, y: 180, r: 4 },
  { x: 140, y: 280, r: 6 },
  { x: 180, y: 140, r: 5 },
  { x: 220, y: 220, r: 8 },
  { x: 280, y: 340, r: 5 },
  { x: 320, y: 180, r: 4 },

  // Center-left (transition zone)
  { x: 380, y: 260, r: 7 },
  { x: 420, y: 160, r: 5 },
  { x: 460, y: 320, r: 6 },

  // Right side (denser, active)
  { x: 840, y: 140, r: 5 },
  { x: 920, y: 200, r: 8 },
  { x: 980, y: 280, r: 6 },
  { x: 1040, y: 180, r: 7 },
  { x: 1080, y: 320, r: 5 },
  { x: 1120, y: 240, r: 4 },

  // Scattered accents
  { x: 560, y: 100, r: 3 },
  { x: 720, y: 380, r: 4 },
  { x: 160, y: 420, r: 3 },
];

// Connections between nodes (index pairs)
// Creates organic, non-uniform network
const connections: [number, number][] = [
  // Left cluster connections
  [0, 2], [1, 3], [2, 3], [3, 5], [1, 4], [4, 6],
  // Center connections
  [5, 7], [6, 7], [6, 8], [7, 8],
  // Right cluster connections
  [9, 10], [10, 11], [10, 12], [11, 13], [12, 13], [12, 14], [13, 14],
  // Long-range connections (sparse)
  [8, 16], [15, 9], [4, 17],
];

const accentColor = '#10b981';
---

<svg
  viewBox="0 0 1200 630"
  xmlns="http://www.w3.org/2000/svg"
  class="og-network"
>
  <defs>
    <!-- Node glow gradient -->
    <radialGradient id="nodeGlow">
      <stop offset="0%" stop-color={accentColor} stop-opacity="0.9"/>
      <stop offset="40%" stop-color={accentColor} stop-opacity="0.3"/>
      <stop offset="100%" stop-color={accentColor} stop-opacity="0"/>
    </radialGradient>

    <!-- Subtle outer glow for larger nodes -->
    <radialGradient id="nodeGlowLarge">
      <stop offset="0%" stop-color={accentColor} stop-opacity="0.8"/>
      <stop offset="30%" stop-color={accentColor} stop-opacity="0.4"/>
      <stop offset="60%" stop-color={accentColor} stop-opacity="0.1"/>
      <stop offset="100%" stop-color={accentColor} stop-opacity="0"/>
    </radialGradient>

    <!-- Connection line gradient (fades at edges) -->
    <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color={accentColor} stop-opacity="0.1"/>
      <stop offset="50%" stop-color={accentColor} stop-opacity="0.35"/>
      <stop offset="100%" stop-color={accentColor} stop-opacity="0.1"/>
    </linearGradient>
  </defs>

  <!-- Connection lines (rendered first, behind nodes) -->
  <g class="connections">
    {connections.map(([i, j]) => {
      const n1 = nodes[i];
      const n2 = nodes[j];
      if (!n1 || !n2) return null;

      // Calculate distance for opacity variation
      const dx = n2.x - n1.x;
      const dy = n2.y - n1.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const opacity = Math.max(0.15, Math.min(0.4, 300 / dist * 0.3));

      return (
        <line
          x1={n1.x}
          y1={n1.y}
          x2={n2.x}
          y2={n2.y}
          stroke={accentColor}
          stroke-opacity={opacity}
          stroke-width="1.5"
        />
      );
    })}
  </g>

  <!-- Nodes with glow effect -->
  <g class="nodes">
    {nodes.map((node, index) => {
      const glowRadius = node.r * 4;
      const isLarge = node.r >= 7;

      return (
        <g key={index}>
          {/* Outer glow (large nodes only) */}
          {isLarge && (
            <circle
              cx={node.x}
              cy={node.y}
              r={glowRadius * 1.5}
              fill="url(#nodeGlowLarge)"
            />
          )}

          {/* Standard glow */}
          <circle
            cx={node.x}
            cy={node.y}
            r={glowRadius}
            fill="url(#nodeGlow)"
          />

          {/* Core node */}
          <circle
            cx={node.x}
            cy={node.y}
            r={node.r}
            fill={accentColor}
          />

          {/* Bright center highlight */}
          <circle
            cx={node.x - node.r * 0.2}
            cy={node.y - node.r * 0.2}
            r={node.r * 0.4}
            fill="white"
            fill-opacity="0.3"
          />
        </g>
      );
    })}
  </g>
</svg>

<style>
  .og-network {
    width: 100%;
    height: 100%;
  }
</style>
